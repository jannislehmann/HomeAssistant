- title: Schiller
  id: schiller
  visible: false
  subview: true
  path: schiller
  icon: mdi:printer-3d
  max_columns: 1
  cards:
    - type: conditional
      conditions:
        - condition: state
          entity: sensor.schiller_print_status
          state: "running"
      card:
        type: vertical-stack
        cards:
          - type: tile
            entity: light.schiller_chamber_light
          - type: tile
            entity: sensor.schiller_current_stage
            tap_action: toggle
          - type: picture-entity
            entity: camera.schiller_camera
          - type: custom:timer-bar-card
            entity: sensor.schiller_print_status
            name: 3D Printer
            active_state: running
            icon: mdi:printer-3d-off
            active_icon: mdi:printer-3d
            end_time:
              entity: sensor.schiller_end_time
            mushroom: null
          - type: picture-entity
            entity: image.schiller_cover_image
    - type: custom:auto-entities
      filter:
        include:
          - integration: '*spoolman*'
            sort:
              method: attribute
              attribute: location
              reverse: false
            attributes:
              archived: false
            options:
              type: custom:mushroom-template-card
              vertical: false
              icon_color: '#{{ state_attr(entity, ''filament_color_hex'') }}'
              icon: mdi:printer-3d-nozzle
              badge_icon: |
                {% if state_attr(entity, 'archived') == true %}
                  mdi:archive
                {% elif state_attr(entity, 'klipper_active_spool') == true %}
                  mdi:check-circle
                {% endif %}
              badge_color: |
                {% if state_attr(entity, 'archived') == true %}
                  orange
                {% elif state_attr(entity, 'klipper_active_spool') == true %}
                  green
                {% else %}
                  default_color
                {% endif %}
              primary: |
                {% set location = state_attr(entity, 'location') %} {% if location %}
                  {{ state_attr(entity, 'filament_name') }} ({{ location }})
                {% else %}
                  {{ state_attr(entity, 'filament_name') }}
                {% endif %}
              secondary: '{{ (state_attr(entity, ''remaining_weight'') | float)  | round(2) }} g'
              tap_action:
                action: more-info
      sort:
        method: attribute
        attribute: klipper_active_spool
        reverse: true
      card:
        type: grid
        columns: 2
        square: false
      card_param: cards