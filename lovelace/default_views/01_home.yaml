- title: Home
  icon: mdi:home
  path: home
  cards:
    - !include ../cards/snow.yaml

    - type: vertical-stack
      cards:
      - !include 
        - ../includes/header.yaml
        - title: Home

      # Home Header
      - type: custom:simple-weather-card
        entity: weather.openweathermap
        name: " "
        primary_info:
          - wind_bearing
          - humidity
        secondary_info:
          - precipitation
          - precipitation_probability
        backdrop: true

      - type: custom:mushroom-template-card
        icon: mdi:alarm-light
        icon_color: black
        entity: alarm_control_panel.ha_alarm
        tap_action:
          action: more-info
        primary: Alarm
        secondary: "{{ states('alarm_control_panel.ha_alarm') }}"
        card_mod:
          style: |
            ha-card {
              --primary-text-color: white;
              --secondary-text-color: white;
              background:
                {% if is_state('alarm_control_panel.ha_alarm', 'disarmed') %}
                  #00FF7F
                {% elif is_state('alarm_control_panel.ha_alarm', 'armed_away') %}
                  orange
                {% elif is_state('alarm_control_panel.ha_alarm', 'armed_home') %}
                  gold
                {% elif is_state('alarm_control_panel.ha_alarm', 'triggered') %}
                  red
                {% else %}
                  gray
                {% endif %}

      # Playing radio
      - type: conditional
        conditions:
          - entity: media_player.forked_daapd_server
            state: playing
        card:
          type: custom:mini-media-player
          entity: media_player.forked_daapd_server
          icon: mdi:radio
          name: Jannis
          tap_action:
            action: navigate
            navigation_path: audio
          hide:
            power: true
            volume: true
            prev: true
            next: true
            name: true
            progress: true
          card_mod:
            style: |
              ha-card {
                --ha-card-background: gray;
                --secondary-text-color: white;
                --mmp-icon-color: white;
              }

      # Person
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: person.jannis
          - type: custom:mushroom-entity-card
            entity: person.hannah

      # Rooms
      - type: vertical-stack
        cards:
          - title: 'Räume'
            type: custom:mushroom-title-card
          - type: grid
            columns: 2
            square: false
            cards:
              # https://community.home-assistant.io/t/mushroom-inspiration/484525/4

              #
              # OFFICE
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Büro
                      secondary: |-
                        {{ states('sensor.temperature_office') }} °C
                        {% if states('binary_sensor.contact_office') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_office') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: phu:rooms-office
                      icon_color: |-
                        {% if is_state('light.room_office', 'on') %}orange{% endif %}
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: buero
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.room_office
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }
                    - type: custom:vertical-stack-in-card
                      horizontal: true
                      cards:
                        - type: custom:mushroom-template-card
                          primary: ''
                          secondary: ''
                          layout: vertical
                          icon: mdi:coffee
                          entity: switch.coffee
                          icon_color: |-
                            {% if is_state(config.entity, "on") %}
                              brown
                            {% else %}
                              grey
                            {% endif%}
                          tap_action:
                            action: toggle
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # LIVING
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Wohnzimmer
                      secondary: |-
                        {{ states('sensor.temperature_living') }} °C
                        {% if states('binary_sensor.contact_living_window') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_living_window') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: phu:rooms-living
                      icon_color: |-
                        {% if is_state('light.room_living', 'on') %}orange{% endif %}
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: wohnzimmer
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.room_living
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }
                    - type: custom:vertical-stack-in-card
                      horizontal: true
                      cards:
                        - type: custom:mushroom-template-card
                          primary: ''
                          secondary: ''
                          layout: vertical
                          icon: phu:floor-shade
                          entity: light.living_floor_light
                          icon_color: |-
                            {% if is_state(config.entity, "on") %}
                              orange
                            {% else %}
                              grey
                            {% endif%}
                          tap_action:
                            action: toggle
                          hold_action:
                            action: more-info
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }
      
              #
              # BED
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Schlafzimmer
                      secondary: |-
                        {{ states('sensor.temperature_bed') }} °C
                        {% if states('binary_sensor.contact_bed') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_bed') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: mdi:bed-double
                      icon_color: |-
                        {% if is_state('light.room_bed', 'on') %}orange{% endif %}
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: schlafzimmer
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.room_bed
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # HALLWAY
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Flur
                      secondary: |-
                        {{ states('sensor.temperature_hall') }} °C
                        {% if states('binary_sensor.contact_door') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_door') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: phu:rooms-hallway
                      icon_color: |-
                        {% if is_state('light.room_hall', 'on') %}orange{% endif %}
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: flur
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.room_hall
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # KITCHEN
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Küche
                      secondary: |-
                        {{ states('sensor.temperature_kitchen') }} °C
                        {% if states('binary_sensor.contact_kitchen') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_kitchen') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: phu:rooms-kitchen
                      icon_color: |-
                        {% if is_state('light.room_kitchen', 'on') %}orange{% endif %}
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: kueche
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.room_kitchen
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # OUTSIDE
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Terrasse
                      secondary: |-
                        {{ states('sensor.temperature_outside') }} °C
                        {% if states('binary_sensor.contact_living_door') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_living_door') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: mdi:grill
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: terrasse
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # STORAGE
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Abstellraum
                      secondary: |-
                        {{ states('sensor.temperature_storage') }} °C
                      icon: phu:rooms-storage
                      icon_color: |-
                        {% if is_state('light.room_storage', 'on') %}orange{% endif %}
                      layout: horizontal
                      tap_action:
                        action: navigate
                        navigation_path: abstellraum
                      double_tap_action:
                        action: call-service
                        service: light.turn_off
                        service_data:
                          entity_id: light.storage
                        haptic: success
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

              #
              # BATHROOM
              #
              - type: custom:vertical-stack-in-card
                cards:
                - type: custom:swipe-card
                  parameters:
                    spaceBetween: 8
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Badezimmer
                      secondary: |-
                        {{ states('sensor.temperature_bath') }} °C
                        {% if states('binary_sensor.contact_bath') in ("unavailable", "on")%}• Offen{% else %} • Geschlossen{% endif %}
                      badge_icon: |-
                        {% if states('binary_sensor.contact_bath') in ("unavailable", "on") %}mdi:door-open{% endif %}
                      badge_color: red
                      icon: phu:rooms-toilet
                      layout: horizontal
                      multiline_secondary: false
                      tap_action:
                        action: navigate
                        navigation_path: badezimmer
                      card_mod:
                        style: |
                          ha-card {
                            --ha-card-border-width: 0;
                          }

      # Audio, Glenn, Tasks
      - type: vertical-stack
        cards:
          - title: Sonstiges
            type: custom:mushroom-title-card
          - type: grid
            columns: 2
            square: false
            cards:
              - type: custom:mushroom-template-card
                primary: Glenn
                icon: phu:roborock
                icon_color: |-
                  {% if is_state('vacuum.glenn', 'cleaning') %}
                  green
                  {% endif %}
                tap_action:
                  action: navigate
                  navigation_path: glenn
                double_tap_action:
                  action: call-service
                  service: vacuum.start
                  service_data:
                    entity_id: vacuum.glenn
                  haptic: success
              - type: custom:mushroom-template-card
                primary: Audio
                icon: mdi:speaker-multiple
                tap_action:
                  action: navigate
                  navigation_path: audio

              - type: custom:mushroom-template-card
                primary: Aufgaben
                icon: mdi:calendar-check
                tap_action:
                  action: navigate
                  navigation_path: chores
