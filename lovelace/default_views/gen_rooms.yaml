# lovelace_gen
{% for room in _global.rooms %}
- title: {{ room.name }}
  visible: false
  path: {{ room.name | lower | replace(" ", "_") }}
  icon: {{ room.icon | default("mdi:home") }}
  cards:
    - type: vertical-stack
      cards:
        - !include 
          - ../includes/header.yaml
          - title: "{{ room.name }}"
            navigation_path: "/lovelace/home"

      {% if room.sensors %}
        - type: horizontal-stack
          cards:
          {% for sensor in room.sensors %}
            - type: custom:decluttering-card
              template: mini_graph
              variables:
                - entity_id: {{ sensor.entity_id }}
                - color: {{ sensor.color }}
                - name: {{ sensor.name }} 
          {% endfor %}
      {% endif %}

      {% if room.lights %}
        - type: vertical-stack
          cards:
            - template: title
              name: Lampen
              type: 'custom:button-card'
            - !include
                - ../includes/grid.yaml
                - entities: 
                  {% for s in room.lights %}
                    - entity_id: {{ s.entity_id }}
                      name: {{ s.name }}
                    {% if s.icon %}
                      icon: {{ s.icon }}
                    {% endif %}
                  {% endfor %}
      {% endif %}

      {% if room.media_players %}
        - type: vertical-stack
          cards:
            - template: title
              name: Media
              type: 'custom:button-card'
          {% for media_player in room.media_players %}
            - type: custom:mini-media-player
              artwork: cover
              entity: {{ media_player.entity_id }}
            {% if media_player.shortcuts %}
              shortcuts:
                buttons:
                {% for shortcut in media_player.shortcuts %}
                  - name: {{ shortcut.name }}
                    type: script
                    id: {{ shortcut.entity_id }}
                {% endfor %}
            {% endif %}
          {% endfor %}
      {% endif %}

      {% if room.covers %}
        - type: vertical-stack
          cards:
            - template: title
              name: Cover
              type: 'custom:button-card'

            {% for cover in room.covers %}
            - template: cover_buttons
              variables:
                entity: {{ cover.entity_id }}
              type: 'custom:button-card'
            {% endfor %}
      {% endif %}

      {% if room.plants %}
        - type: vertical-stack
          cards:
            - template: title
              name: Pflanzen
              type: 'custom:button-card'
            {% for plant in room.plants %}
            - type: custom:flower-card
              entity: {{ plant.entity_id }}
            {% endfor %}
      {% endif %}

      {% if room.includes %}
        {% for include in room.includes %}
        - !include {{ include }}
        {% endfor %}
      {% endif %}

      {% if room.additional_buttons or room.additional_switches %}
        - type: vertical-stack
          cards:
            - template: title
              name: Sonstiges
              type: 'custom:button-card'
            - type: entities
              entities:
              {% if room.additional_buttons %}
              {% for switch in room.additional_switches %}
                - {{ switch.entity_id }}
              {% endfor %}
              {% endif %}
              {% if room.additional_buttons %}
              {% for button in room.additional_buttons %}
                - {{ button.entity_id }}
              {% endfor %}
              {% endif %}
      {% endif %}

{% endfor %}
